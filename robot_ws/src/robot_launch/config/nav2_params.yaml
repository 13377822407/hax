# Nav2 configuration for delivery robot
nav2_yaml:
  amcl:
    ros__parameters:
      use_sim_time: false
      alpha1: 0.2
      alpha2: 0.2
      alpha3: 0.2
      alpha4: 0.2
      alpha5: 0.2
      base_frame_id: "base_link"
      beam_search_angle: 0.545
      max_beams: 60
      max_particles: 2000
      min_particles: 500
      pf_err: 0.05
      pf_z: 0.99
      recovery_alpha_fast: 0.0
      recovery_alpha_slow: 0.0
      resample_interval: 1
      robot_model_type: "nav2_amcl::DifferentialMotionModel"
      save_pose_rate: 0.5
      sigma_hit: 0.2
      sigma_short: 0.05
      tf_broadcast: true
      transform_tolerance: 1.0
      update_min_a: 0.2
      update_min_d: 0.25
      z_hit: 0.5
      z_max: 0.05
      z_rand: 0.5
      z_short: 0.05
      scan_topic: /scan

  controller_server:
    ros__parameters:
      use_sim_time: false
      controller_frequency: 20.0
      min_x_velocity_threshold: 0.001
      min_y_velocity_threshold: 0.5
      min_theta_velocity_threshold: 0.001
      default_controller: "FollowPath"
      progress_checker_plugin: "progress_checker"
      goal_checker_plugins: ["general_goal_checker"]
      controller_plugins: ["FollowPath"]

# Costmap parameters
costmap_common_params:
  robot_radius: 0.21
  footprint: [[0.21, 0.165], [0.21, -0.165], [-0.21, -0.165], [-0.21, 0.165]]
  plugins:
    - static_layer
    - obstacle_layer
    - inflation_layer
  
  static_layer:
    plugin: "nav2_costmap_2d::StaticLayer"
    map_subscribe_transient_local: true

  obstacle_layer:
    plugin: "nav2_costmap_2d::ObstacleLayer"
    enabled: true
    observation_sources: scan
    scan:
      topic: /scan
      max_obstacle_height: 2.0
      clearing: true
      marking: true
      data_type: "LaserScan"

  inflation_layer:
    plugin: "nav2_costmap_2d::InflationLayer"
    cost_scaling_factor: 3.0
    inflation_radius: 0.55
